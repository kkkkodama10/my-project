# README設計書レビュー & 改善提案

## 1. レビュー結果まとめ

### 十分な項目
- 画面ごとのURLと基本的な画面遷移（一覧・登録・詳細・編集・削除）の概要
- 入力項目（name, species, sex）とそのバリデーション（必須・最大文字数）の記載
- データモデルのカラム・型・制約の明記
- コミットプランや開発フローの明確な記載
- CRUD操作の基本的な流れと要件

### 不足している項目
- 各画面のUI要素（ボタン名、ラベル、フォーム構成）の具体的な仕様
- 画面遷移図や遷移元・遷移先の明示
- バリデーションエラーやAPI通信エラー時の画面上でのエラーメッセージ表示ルール
- APIエンドポイントやリクエスト/レスポンス例（JSON構造など）の記載
- クライアント側（JS等）の処理仕様（必要な場合）

### 改善点
- 各画面ごとに「どのUI要素があり、どのようなラベル・ボタン名か」を明記すると実装が容易
- バリデーションエラーやDBエラー時の画面表示例・メッセージ例を追加すると親切
- API設計（エンドポイント、リクエスト/レスポンス例）を明記するとフロント・バックエンドの連携がスムーズ
- 画面遷移図やシーケンス例があると全体像が把握しやすい

---

## 2. 不足項目の詳細と改善案

### 2.1 画面UI要素の仕様

#### 一覧画面（GET /）
- UI要素:
  - 「新規登録」ボタン（画面上部または下部）
  - ペット一覧テーブル（各行に「詳細」「編集」「削除」ボタン）
- レイアウト例:
  - テーブル: 名前／種別／性別／登録日／操作（詳細・編集・削除）
  - 新規登録フォーム: ページ下部に配置

#### 登録画面（POST /）
- UI要素:
  - 入力フォーム（name, species, sex）
  - 「登録」ボタン
- ラベル例:
  - 名前（必須）
  - 種別（必須）
  - 性別（必須: 男性/女性/不明）
- プレースホルダー例:
  - 名前: "例）ポチ"
  - 種別: "例）イヌ"

#### 詳細画面（GET /pets/<id>）
- UI要素:
  - ペット情報表示
  - 「編集」「削除」「戻る」ボタン

#### 編集画面（GET+POST /pets/<id>/edit）
- UI要素:
  - プリフィル済みフォーム
  - 「更新」ボタン
  - 「戻る」ボタン

#### 削除（POST /pets/<id>/delete）
- UI要素:
  - 削除確認ダイアログまたは画面
  - 「削除」「キャンセル」ボタン

---

### 2.2 エラーハンドリング仕様

- バリデーションエラー時:
  - 各フォーム項目下に赤字でエラーメッセージを表示
  - 例: "名前は必須です（50文字以内）"
- DBやAPI通信エラー時:
  - 画面上部にアラート（赤色）でエラーメッセージを表示
  - 例: "登録に失敗しました。再度お試しください。"

---

### 2.3 API仕様・データ構造例

#### エンドポイント一覧
- GET    /pets         : ペット一覧取得
- POST   /pets         : ペット新規登録
- GET    /pets/<id>    : ペット詳細取得
- PUT    /pets/<id>    : ペット情報更新
- DELETE /pets/<id>    : ペット削除

#### リクエスト/レスポンス例

- 新規登録（POST /pets）
  - リクエスト:
    ```json
    {
      "name": "ポチ",
      "species": "イヌ",
      "sex": "male"
    }
    ```
  - レスポンス:
    ```json
    {
      "id": 1,
      "name": "ポチ",
      "species": "イヌ",
      "sex": "male",
      "created_at": "2025-07-12T12:34:56+09:00",
      "updated_at": "2025-07-12T12:34:56+09:00"
    }
    ```

- バリデーションエラー時:
  - レスポンス:
    ```json
    {
      "error": "nameは必須です"
    }
    ```

---

## 3. 画面遷移図（例）

```
[一覧] --新規登録--> [登録フォーム]
  |                     |
  |--詳細--> [詳細画面]  |
  |                     |
  |--編集--> [編集画面]  |
  |                     |
  |--削除--> [削除確認]  |
```

---

## 4. 改善後READMEへの反映例

- 各画面のUI要素・ボタン名・ラベル名・配置例を明記
- バリデーション/DBエラー時の画面表示例を追加
- APIエンドポイント・リクエスト/レスポンス例を記載
- 画面遷移図を追加

---

以上をREADMEに追記・反映することで、より実装・運用しやすい設計書となります。
