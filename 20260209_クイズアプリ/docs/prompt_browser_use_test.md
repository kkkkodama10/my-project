# Browser Use UIマニュアルテスト プロンプト

## 使い方

各テストブロックのプロンプトをコピーして Claude Code の browser use に貼り付けて実行してください。
テストは独立したブロックに分かれているため、1つずつ順番に実行します。

> **Browser use でテストできない項目（人間が実施）:**
> - ドラッグ＆ドロップ（問題並び替え）
> - ファイルアップロード（画像アップロード）
> - CSVダウンロード＆Excelでの文字化け確認
> - ネットワーク切断・復旧テスト
> - ブラウザ閉じて再度開くテスト
> - Cookie 手動削除テスト
> - シークレットウィンドウテスト
> - 複数ブラウザ同時操作テスト（参加者A + 参加者B 同時）
> - iOS Safari / Android Chrome テスト
> - レスポンシブ表示（画面幅変更・回転）

---

## テスト 1: 管理者ログイン（正常系 + 異常系）

```
あなたはUIテスターです。以下の手順を1つずつ実行し、各ステップの結果を「OK」「NG」で報告してください。
スクリーンショットを各ステップで撮影し、画面の状態を詳細に記述してください。

## テスト環境
- ベースURL: https://dasrqxsst4jru.cloudfront.net
- 管理者パスワード: secret

## テスト手順

### テスト 1-1: 管理者ログイン画面の表示
1. https://dasrqxsst4jru.cloudfront.net/admin にアクセスする
2. 確認: パスワード入力フォームが表示されているか？
3. 確認: ログインボタンが表示されているか？

### テスト 1-2: 誤ったパスワードでのログイン
1. パスワード入力欄に「wrongpassword」と入力する
2. ログインボタンを押す
3. 確認: エラーメッセージが表示されるか？
4. 確認: ログイン画面に留まっているか？

### テスト 1-3: パスワード未入力でのログイン
1. パスワード入力欄を空にする
2. ログインボタンを押す
3. 確認: バリデーションエラーまたはエラーメッセージが表示されるか？

### テスト 1-4: 正しいパスワードでのログイン
1. パスワード入力欄に「secret」と入力する
2. ログインボタンを押す
3. 確認: ダッシュボード画面に遷移したか？
4. 確認: 管理者向けのUI要素（イベント作成、問題管理など）が表示されているか？

### テスト 1-5: ページリロード後のセッション維持
1. 現在のページをリロードする（URLバーで同じURLにアクセスし直す）
2. 確認: ダッシュボードが引き続き表示されているか？（ログイン画面に戻っていないか？）

## 結果報告
各テストの結果を以下の形式でまとめてください:
| テスト | 結果 | 備考 |
|--------|------|------|
| 1-1 | OK/NG | ... |
| 1-2 | OK/NG | ... |
| 1-3 | OK/NG | ... |
| 1-4 | OK/NG | ... |
| 1-5 | OK/NG | ... |
```

---

## テスト 2: 問題管理（作成・編集・有効無効切替）

```
あなたはUIテスターです。以下の手順を1つずつ実行し、各ステップの結果を「OK」「NG」で報告してください。
スクリーンショットを各ステップで撮影し、画面の状態を詳細に記述してください。

## テスト環境
- ベースURL: https://dasrqxsst4jru.cloudfront.net
- 管理者パスワード: secret

## 前提: 管理者ログイン
1. https://dasrqxsst4jru.cloudfront.net/admin にアクセスする
2. パスワード「secret」でログインする
3. ダッシュボードが表示されることを確認

## テスト手順

### テスト 2-1: 問題管理画面への遷移
1. 問題管理ページ（/admin/questions）に遷移する（ナビゲーションリンクまたは直接URL）
2. 確認: 問題一覧が表示されているか？
3. 確認: 既存の問題が何件あるかメモする

### テスト 2-2: 新規問題作成（正常系）
1. 「新規作成」ボタン（または問題追加のUI要素）をクリックする
2. 以下の内容を入力する:
   - 問題文: 「テスト問題：日本の首都はどこですか？」
   - 選択肢1: 「大阪」
   - 選択肢2: 「東京」
   - 選択肢3: 「名古屋」
   - 選択肢4: 「福岡」
   - 正解: 選択肢2（東京）を正解に設定
3. 保存ボタンを押す
4. 確認: 問題が一覧に追加されたか？
5. 確認: 問題文・選択肢・正解が正しく表示されているか？

### テスト 2-3: 問題編集
1. 先ほど作成した問題「テスト問題：日本の首都はどこですか？」の編集ボタンを押す
2. 確認: 編集フォームに既存の値（問題文・選択肢・正解）がプリセットされているか？
3. 問題文を「テスト問題（編集済み）：日本の首都はどこですか？」に変更する
4. 保存ボタンを押す
5. 確認: 変更が反映されているか？

### テスト 2-4: 問題の有効/無効切替
1. 先ほど編集した問題の有効/無効トグル（またはスイッチ）をクリックする
2. 確認: 問題が無効状態に切り替わったか？（UIで視覚的に区別できるか？）
3. もう一度トグルをクリックして有効に戻す
4. 確認: 問題が有効状態に戻ったか？

### テスト 2-5: バリデーションエラー（問題文空）
1. 新規作成画面を開く
2. 問題文を空のまま、選択肢だけ入力して保存を試みる
3. 確認: バリデーションエラーが表示されるか？

## 結果報告
各テストの結果を以下の形式でまとめてください:
| テスト | 結果 | 備考 |
|--------|------|------|
| 2-1 | OK/NG | ... |
| 2-2 | OK/NG | ... |
| 2-3 | OK/NG | ... |
| 2-4 | OK/NG | ... |
| 2-5 | OK/NG | ... |
```

---

## テスト 3: 参加者の参加フロー（正常系 + 異常系）

```
あなたはUIテスターです。以下の手順を1つずつ実行し、各ステップの結果を「OK」「NG」で報告してください。
スクリーンショットを各ステップで撮影し、画面の状態を詳細に記述してください。

## テスト環境
- ベースURL: https://dasrqxsst4jru.cloudfront.net
- 参加コード: 123456

## テスト手順

### テスト 3-1: 参加画面の表示
1. https://dasrqxsst4jru.cloudfront.net/ にアクセスする
2. 確認: 参加コード入力フォームが表示されているか？
3. 確認: 参加（または送信）ボタンが表示されているか？

### テスト 3-2: 誤った参加コードでの参加
1. 参加コード入力欄に「999999」と入力する
2. 参加ボタンを押す
3. 確認: エラーメッセージが表示されるか？
4. 確認: 入力フォームに留まり、再入力可能か？

### テスト 3-3: 参加コード空で送信
1. 参加コード入力欄を空にする
2. 参加ボタンを押す
3. 確認: バリデーションエラーが表示されるか？

### テスト 3-4: 正しい参加コードでの参加
1. 参加コード入力欄に「123456」と入力する
2. 参加ボタンを押す
3. 確認: エラーなく次の画面（表示名入力画面）に遷移したか？

### テスト 3-5: 表示名の登録
1. 表示名入力欄に「テスター太郎」と入力する
2. 登録ボタンを押す
3. 確認: クイズ画面（/quiz/...）に遷移したか？
4. 確認: 待機画面が表示されているか？（「まもなく開始」等のメッセージ）

### テスト 3-6: 表示名を空で送信
1. （もし再度テストできる場合）表示名入力欄を空にして送信
2. 確認: バリデーションエラーが表示されるか？

## 結果報告
各テストの結果を以下の形式でまとめてください:
| テスト | 結果 | 備考 |
|--------|------|------|
| 3-1 | OK/NG | ... |
| 3-2 | OK/NG | ... |
| 3-3 | OK/NG | ... |
| 3-4 | OK/NG | ... |
| 3-5 | OK/NG | ... |
| 3-6 | OK/NG | ... |
```

---

## テスト 4: 管理者によるイベント作成とイベント進行

```
あなたはUIテスターです。以下の手順を1つずつ実行し、各ステップの結果を「OK」「NG」で報告してください。
スクリーンショットを各ステップで撮影し、画面の状態を詳細に記述してください。

## テスト環境
- ベースURL: https://dasrqxsst4jru.cloudfront.net
- 管理者パスワード: secret

## 前提: 管理者ログイン
1. https://dasrqxsst4jru.cloudfront.net/admin にアクセスする
2. パスワード「secret」でログインする

## テスト手順

### テスト 4-1: イベント作成
1. ダッシュボードでイベント作成の機能を探す
2. タイトル「ブラウザテスト用イベント」、問題を選択してイベントを作成する
3. 確認: イベントが作成されたか？
4. 確認: 参加コード（join_code）が表示されているか？
5. 確認: イベント状態が「waiting」になっているか？

### テスト 4-2: 参加コード変更
1. 参加コードの変更機能を探す
2. 参加コードを「654321」に変更する
3. 確認: 新しい参加コードが画面に反映されたか？

### テスト 4-3: イベント開始
1. 「開始」ボタンを押す
2. 確認: イベント状態が「running」に変わったか？
3. 確認: UIの表示が変わったか？（ボタンの状態変化など）

### テスト 4-4: 次の問題を出題
1. 「次の問題」ボタンを押す
2. 確認: 問題情報が管理者画面に表示されたか？
3. 確認: どの問題が出題されたか記録する

### テスト 4-5: 問題の締切
1. 「締切」ボタンを押す
2. 確認: 回答受付が終了した旨のUI変化があるか？

### テスト 4-6: 正解の表示
1. 「正解表示」ボタンを押す
2. 確認: 正解に関する情報が表示されたか？

### テスト 4-7: 状態に応じたボタンの無効化
1. 現在の状態を確認する
2. 確認: 不適切な操作のボタン（例: 既に開始済みなのに「開始」ボタン）が disabled になっているか？
3. 各ボタンのenabled/disabled状態をスクリーンショットで記録する

### テスト 4-8: 残りの問題を進める
1. 「次の問題」→「締切」→「正解表示」を残りの問題でも繰り返す
2. 確認: 各問題が順次進行するか？

### テスト 4-9: イベント終了
1. 全問題完了後、「終了」ボタンを押す
2. 確認: イベント状態が「finished」に変わったか？

## 結果報告
各テストの結果を以下の形式でまとめてください:
| テスト | 結果 | 備考 |
|--------|------|------|
| 4-1 | OK/NG | ... |
| 4-2 | OK/NG | ... |
| 4-3 | OK/NG | ... |
| 4-4 | OK/NG | ... |
| 4-5 | OK/NG | ... |
| 4-6 | OK/NG | ... |
| 4-7 | OK/NG | ... |
| 4-8 | OK/NG | ... |
| 4-9 | OK/NG | ... |
```

---

## テスト 5: イベントリセットと中止

```
あなたはUIテスターです。以下の手順を1つずつ実行し、各ステップの結果を「OK」「NG」で報告してください。
スクリーンショットを各ステップで撮影し、画面の状態を詳細に記述してください。

## テスト環境
- ベースURL: https://dasrqxsst4jru.cloudfront.net
- 管理者パスワード: secret

## 前提: 管理者ログイン
1. https://dasrqxsst4jru.cloudfront.net/admin にアクセスする
2. パスワード「secret」でログインする

## テスト手順

### テスト 5-1: イベントリセット
1. ダッシュボードでイベント情報を確認する
2. 「リセット」ボタンを押す
3. 確認: イベント状態が「waiting」に戻ったか？
4. 確認: 参加者・回答データがクリアされた旨のUI変化があるか？

### テスト 5-2: リセット後のイベント再開
1. リセット後、「開始」ボタンを押す
2. 確認: イベント状態が「running」になったか？
3. 「次の問題」を押す
4. 確認: 最初の問題が出題されたか？

### テスト 5-3: イベント中止
1. 「中止」ボタンを押す
2. 確認: イベント状態が「aborted」に変わったか？
3. 確認: UIが中止状態を反映しているか？

### テスト 5-4: 中止後のリセット
1. 「リセット」ボタンを押す
2. 確認: イベント状態が「waiting」に戻ったか？
3. 確認: 再度「開始」ボタンが有効になっているか？

## 結果報告
各テストの結果を以下の形式でまとめてください:
| テスト | 結果 | 備考 |
|--------|------|------|
| 5-1 | OK/NG | ... |
| 5-2 | OK/NG | ... |
| 5-3 | OK/NG | ... |
| 5-4 | OK/NG | ... |
```

---

## テスト 6: 結果画面の確認

```
あなたはUIテスターです。以下の手順を1つずつ実行し、各ステップの結果を「OK」「NG」で報告してください。
スクリーンショットを各ステップで撮影し、画面の状態を詳細に記述してください。

## テスト環境
- ベースURL: https://dasrqxsst4jru.cloudfront.net

## テスト手順

### テスト 6-1: 結果画面の表示（イベント終了後）
1. まず管理者として https://dasrqxsst4jru.cloudfront.net/admin にログイン（パスワード: secret）
2. ダッシュボードからイベントIDを確認する（URLやUI上で確認できるevent_id）
3. https://dasrqxsst4jru.cloudfront.net/results/{確認したevent_id} にアクセスする
4. 確認: リーダーボード（順位表）が表示されているか？
5. 確認: 以下の項目が表示されているか？
   - 順位（rank）
   - 表示名
   - 正解数
   - 正答率
   - 回答時間
6. 確認: 順位が正しい順（1位から降順）で表示されているか？

### テスト 6-2: 結果画面のCSVエクスポートボタン
1. 結果画面でCSVエクスポートボタンが存在するか確認する
2. 確認: ボタンが表示されクリック可能か？
（※ 実際のダウンロード・Excel確認は人間が別途行います）

### テスト 6-3: 参加者0人のイベント結果
1. 管理者画面でイベントをリセットし、参加者なしの状態で開始→全問題進行→終了する
   a. https://dasrqxsst4jru.cloudfront.net/admin にアクセス
   b. リセットボタンを押す
   c. 開始ボタンを押す
   d. 「次の問題」→「締切」→「正解表示」を全問題分繰り返す
   e. 「終了」ボタンを押す
2. 結果画面にアクセスする
3. 確認: エラーなく表示されるか？
4. 確認: リーダーボードが空（参加者なし）で表示されるか？

## 結果報告
各テストの結果を以下の形式でまとめてください:
| テスト | 結果 | 備考 |
|--------|------|------|
| 6-1 | OK/NG | ... |
| 6-2 | OK/NG | ... |
| 6-3 | OK/NG | ... |
```

---

## テスト 7: 管理者ログイン レート制限

```
あなたはUIテスターです。以下の手順を1つずつ実行し、各ステップの結果を「OK」「NG」で報告してください。
スクリーンショットを各ステップで撮影し、画面の状態を詳細に記述してください。

⚠️ このテストを実行すると管理者アカウントが15分間ロックされます。他のテストを先に終わらせてから実行してください。

## テスト環境
- ベースURL: https://dasrqxsst4jru.cloudfront.net

## テスト手順

### テスト 7-1: 5回連続でログイン失敗
1. https://dasrqxsst4jru.cloudfront.net/admin にアクセスする
2. 誤ったパスワード「wrong1」でログイン試行 → エラーメッセージを確認
3. 誤ったパスワード「wrong2」でログイン試行 → エラーメッセージを確認
4. 誤ったパスワード「wrong3」でログイン試行 → エラーメッセージを確認
5. 誤ったパスワード「wrong4」でログイン試行 → エラーメッセージを確認
6. 誤ったパスワード「wrong5」でログイン試行
7. 確認: 5回目の失敗後、レート制限のエラーメッセージが表示されるか？（通常の認証エラーとは異なるメッセージか？）

### テスト 7-2: レート制限中に正しいパスワードでログイン
1. 正しいパスワード「secret」でログインを試みる
2. 確認: レート制限エラーが表示されるか？（正しいパスワードでもログインできないか？）

## 結果報告
各テストの結果を以下の形式でまとめてください:
| テスト | 結果 | 備考 |
|--------|------|------|
| 7-1 | OK/NG | ... |
| 7-2 | OK/NG | ... |
```

---

## テスト 8: 監査ログ確認

```
あなたはUIテスターです。以下の手順を1つずつ実行し、各ステップの結果を「OK」「NG」で報告してください。
スクリーンショットを各ステップで撮影し、画面の状態を詳細に記述してください。

## テスト環境
- ベースURL: https://dasrqxsst4jru.cloudfront.net
- 管理者パスワード: secret

## 前提: 管理者ログイン
1. https://dasrqxsst4jru.cloudfront.net/admin にアクセスする
2. パスワード「secret」でログインする

## テスト手順

### テスト 8-1: 監査ログの確認（APIで取得）
1. ブラウザのアドレスバーで https://dasrqxsst4jru.cloudfront.net/api/admin/logs にアクセスする
2. 確認: JSON形式のログデータが表示されるか？
3. 確認: 各ログエントリに以下が含まれているか？
   - ts（タイムスタンプ）
   - action（アクション種別）
   - event_id（イベントID、存在する場合）
4. 確認: これまでのテストで実施した操作（イベント作成、開始、問題出題、終了、リセットなど）がログに記録されているか？

## 結果報告
各テストの結果を以下の形式でまとめてください:
| テスト | 結果 | 備考 |
|--------|------|------|
| 8-1 | OK/NG | ... |
```

---

## テスト 9: 直接URL遷移・不正アクセス

```
あなたはUIテスターです。以下の手順を1つずつ実行し、各ステップの結果を「OK」「NG」で報告してください。
スクリーンショットを各ステップで撮影し、画面の状態を詳細に記述してください。

## テスト環境
- ベースURL: https://dasrqxsst4jru.cloudfront.net

## テスト手順

### テスト 9-1: セッションなしでクイズ画面にアクセス
1. ブラウザのCookieをクリアする（または新しいタブ/プロファイルを使用）
2. https://dasrqxsst4jru.cloudfront.net/quiz/demo に直接アクセスする
3. 確認: 参加ページ（/）にリダイレクトされるか？
4. 確認: または適切なエラーメッセージが表示されるか？

### テスト 9-2: 存在しないイベントの結果画面にアクセス
1. https://dasrqxsst4jru.cloudfront.net/results/nonexistent_event_id にアクセスする
2. 確認: エラーメッセージが表示されるか？
3. 確認: アプリがクラッシュせず正常にエラーハンドリングしているか？

### テスト 9-3: 存在しないパスにアクセス
1. https://dasrqxsst4jru.cloudfront.net/this-does-not-exist にアクセスする
2. 確認: 404ページまたは適切なフォールバックが表示されるか？

### テスト 9-4: API エンドポイントに直接アクセス（ヘルスチェック）
1. https://dasrqxsst4jru.cloudfront.net/api/health にアクセスする
2. 確認: {"status":"ok"} のJSONレスポンスが表示されるか？

### テスト 9-5: 認証なしで管理者APIにアクセス
1. https://dasrqxsst4jru.cloudfront.net/api/admin/questions にアクセスする
2. 確認: 401 Unauthorized のエラーレスポンスが表示されるか？（管理者APIが保護されているか？）

## 結果報告
各テストの結果を以下の形式でまとめてください:
| テスト | 結果 | 備考 |
|--------|------|------|
| 9-1 | OK/NG | ... |
| 9-2 | OK/NG | ... |
| 9-3 | OK/NG | ... |
| 9-4 | OK/NG | ... |
| 9-5 | OK/NG | ... |
```

---

## テスト 10: エッジケース（表示確認）

```
あなたはUIテスターです。以下の手順を1つずつ実行し、各ステップの結果を「OK」「NG」で報告してください。
スクリーンショットを各ステップで撮影し、画面の状態を詳細に記述してください。

## テスト環境
- ベースURL: https://dasrqxsst4jru.cloudfront.net
- 管理者パスワード: secret

## 前提: 管理者ログイン
1. https://dasrqxsst4jru.cloudfront.net/admin にアクセスする
2. パスワード「secret」でログインする

## テスト手順

### テスト 10-1: 長い問題文の作成と表示確認
1. 問題管理画面（/admin/questions）にアクセスする
2. 新規問題を作成する:
   - 問題文: 「これは非常に長い問題文のテストです。表示が崩れないことを確認するために、十分な長さのテキストを入力しています。問題文が折り返されて正しく表示されるかどうかをチェックします。さらに長い文章を追加して、UIのレイアウトが破綻しないことを確認します。」
   - 選択肢1: 「これは非常に長い選択肢のテキストです。選択肢ボタンの中でテキストが適切に折り返されるかを確認します。」
   - 選択肢2: 「短い選択肢」
   - 選択肢3: 「中程度の長さの選択肢テキストが正しく表示されるか」
   - 選択肢4: 「D」
   - 正解: 選択肢2
3. 保存する
4. 確認: 問題一覧で長い問題文が適切に表示されているか？（はみ出し・重なりがないか？）

### テスト 10-2: 長い問題のクイズ画面での表示
1. ダッシュボードに戻る
2. イベントをリセットする（もし既に終了済みの場合）
3. 先ほど作成した長い問題を含むイベントを開始する
4. 「次の問題」で長い問題文の問題が出題されるまで進める
5. 確認（管理者画面で）: 長い問題文がはみ出さず表示されているか？

### テスト 10-3: 問題画像なしの場合の表示
1. 画像が設定されていない問題が出題された際の表示を確認する
2. 確認: 画像エリアが空白のまま残っていないか？（画像がない場合はエリア自体が非表示になるか？）
3. 確認: レイアウトに崩れがないか？

## 結果報告
各テストの結果を以下の形式でまとめてください:
| テスト | 結果 | 備考 |
|--------|------|------|
| 10-1 | OK/NG | ... |
| 10-2 | OK/NG | ... |
| 10-3 | OK/NG | ... |
```

---

## 推奨実行順序

1. **テスト 1** — 管理者ログイン（正常系 + 異常系）
2. **テスト 2** — 問題管理（CRUD）
3. **テスト 10** — エッジケース（長文問題作成）
4. **テスト 4** — イベント作成と進行
5. **テスト 6** — 結果画面の確認
6. **テスト 5** — リセットと中止
7. **テスト 3** — 参加者の参加フロー
8. **テスト 9** — 直接URL遷移・不正アクセス
9. **テスト 8** — 監査ログ確認
10. **テスト 7** — レート制限 ⚠️（15分ロックされるため最後に実行）

---

## 人間が実施する項目（Browser use 対象外）

| # | テスト内容 | 理由 |
|---|-----------|------|
| 1 | ドラッグ＆ドロップで問題並び替え（4.7 手順6） | Browser use は D&D 非対応 |
| 2 | 画像アップロード（4.7 手順7,8） | Browser use はファイル選択ダイアログ非対応 |
| 3 | 非対応ファイルのアップロードエラー（4.7 手順10） | 同上 |
| 4 | CSVダウンロード → Excelで文字化け確認（4.9） | ファイルDL・外部アプリ確認が必要 |
| 5 | ブラウザ閉じて再度開くセッション維持（4.12 手順1,3） | ブラウザ再起動が必要 |
| 6 | Cookie手動削除テスト（4.12 手順4） | DevTools操作が必要 |
| 7 | シークレットウィンドウテスト（4.12 手順5） | 別ウィンドウ起動が必要 |
| 8 | 複数参加者の同時プレイ（4.8） | 複数ブラウザの同時操作が必要 |
| 9 | ネットワーク切断・復旧（4.2 手順6） | OS/DevToolsレベルの操作が必要 |
| 10 | iOS Safari / Android Chrome テスト（4.10） | 実機が必要 |
| 11 | レスポンシブ・画面回転テスト（4.11） | DevToolsまたは実機が必要 |
| 12 | 自動モードでの進行（4.5） | タイミング制御が困難 |
